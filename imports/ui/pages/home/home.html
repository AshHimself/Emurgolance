<template name="home">
  <div class="documents-index container-fluid">
    <div class="row">
      <div class="col-sm-12">
          {{> loginButtons}}
          <a href="/settings">Settings</a> {{#if isModerator}}<a href="/moderator/users">Manage users</a>{{/if}}
          <div class="card">
            <div class="card-header">
              Timesheet
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-sm-4">
                    <div class="input-group">
                        <input type="text" id="js-issue" class="form-control" placeholder="GitHub issue link">
                        <span class="input-group-append">
                          <button type="button" class="btn btn-primary" id="js-start" href="#" role="button">Start work</button>
                        </span>
                    </div>
                </div>

              </div>
              
              
              <br>
              {{#if Template.subscriptionsReady}}
                {{#if timesheets.count}}
                  <table class="table table-responsive-sm table-hover table-outline mb-0">
                    <thead class="thead-light">
                      <tr>
                        <th>Issue</th>
                        <th>Project</th>
                        <th>Start time</th>
                        <th>End time</th>
                        <th>Total working time</th>
                        <th class="text-right">Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      {{#each timesheets}}
                        <tr class="documents-index-item">
                          <td scope="row">{{issue}}</td>
                          <td scope="row">{{project}}</td>
                          <td>{{formatDate start}}</td>
                          <td>{{#if endTime}}{{formatDate endTime}}{{else}}-{{/if}}</td>
                          <td>{{totalTime}}</td>
                          <td class="text-right">
                      {{#if active}}
                      <a class="btn btn-sm btn-success" id="js-pause" href="#" role="button">
                        Pause
                      </a>
                      {{else}}
                      {{#if paused}}
                      <a class="btn btn-sm btn-success" id="js-continue" href="#" role="button">
                          Continue
                        </a>
                      {{/if}}
                    {{/if}}
                  {{#if active}}
                  <a class="btn btn-sm btn-secondary" href="#" id="js-finish" role="button">Finish</a>
                  {{/if}}
                  </td>
                </tr>
                      {{/each}}
                    </tbody>
                  </table>
                  Total amount of work: <b>{{total.formattedTime}}</b><br />
                  Total earnings: {{#if currentUser.profile.hourlyRateApproved}}<span style="color: green">{{fixed total.earnings}}$</span>{{else}}<span style="color: orange">{{fixed total.earnings}}$</span>{{/if}} ({{fixed total.decimalTime}} x {{fixed currentUser.profile.hourlyRate}})
                {{else}}
                  <div class="mt-3">
                    {{> emptyResult text="No timesheet entries" description="Start working to add some..." icon=""}}
                  </div>
                {{/if}}
              {{else}}
                {{> loader}}
              {{/if}}
            </div>
          </div>
      </div>
    </div>
  </div>

</template>
